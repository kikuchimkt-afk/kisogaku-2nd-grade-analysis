<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>徳島県基礎学力テスト（2年数学）5カ年徹底分析ラボ</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Chosen Palette: Indigo (Intellect/Logic) & Amber (Highlight/Warning) -->
    <!-- Application Structure Plan:
         1. Hero Section: "The Stairs of Math" concept from the report.
         2. Macro Analytics: Visualization of Score Distribution (Q1 vs Rest) and Skill Radar.
         3. Question Deep Dive (Interactive Grid): 
            - Selectable cards for Q1-Q5.
            - Dynamic content pane showing Trend, Strategy, and "Traps" based on R2-R6 data.
         4. Iron Rules (Accordion): The 3 absolute rules for passing.
         5. Future Forecast: Predictions for the next test.
    -->

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap');

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8fafc;
            /* slate-50 */
            color: #1e293b;
            /* slate-800 */
        }

        /* Chart Container Styling - Strictly adhering to requirements */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            /* Base height */
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        .nav-btn.active {
            background-color: #4f46e5;
            /* indigo-600 */
            color: white;
            border-color: #4f46e5;
        }

        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stair-step {
            transition: all 0.3s ease;
        }

        .stair-step:hover {
            transform: translateX(5px);
            background-color: #e0e7ff;
            /* indigo-50 */
        }
    </style>
</head>

<body class="flex flex-col min-h-screen">

    <!-- Header -->
    <header class="bg-indigo-900 text-white sticky top-0 z-50 shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-amber-400 rounded flex items-center justify-center text-indigo-900 font-bold">
                    <i class="fa-solid fa-calculator"></i>
                </div>
                <h1 class="text-lg md:text-xl font-bold tracking-tight">徳島数学分析ラボ <span
                        class="text-xs font-normal opacity-75 ml-2">R2-R6 完全版</span></h1>
            </div>
            <nav class="hidden md:flex gap-6 text-sm font-bold">
                <a href="#overview" class="hover:text-amber-300 transition">全体構造</a>
                <a href="#deep-dive" class="hover:text-amber-300 transition">大問別攻略</a>
                <a href="#rules" class="hover:text-amber-300 transition">鉄則</a>
                <a href="#forecast" class="hover:text-amber-300 transition">出題予想</a>
            </nav>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-8 space-y-16">

        <!-- Hero Section -->
        <section class="text-center space-y-6 max-w-4xl mx-auto">
            <div
                class="inline-block px-4 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold border border-indigo-200">
                出願校決定のための5カ年徹底分析
            </div>
            <h2 class="text-4xl md:text-5xl font-black text-slate-900 leading-tight">
                数学は<span class="text-indigo-600">「階段」</span>である。
            </h2>
            <p class="text-slate-600 text-lg leading-relaxed">
                徳島県の基礎学力テストは、単なる計算力テストではありません。<br class="hidden md:block">
                社会課題を数理的に解く「思考力」と、論理的に説明する「表現力」を測る<br>
                明確な意図を持った「3段構造」の試験です。
            </p>
        </section>

        <!-- Overview Dashboard -->
        <section id="overview" class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Chart 1: Score Distribution -->
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                    <i class="fa-solid fa-chart-pie text-indigo-500"></i> 配点構造の真実
                </h3>
                <div class="chart-container">
                    <canvas id="scoreChart"></canvas>
                </div>
                <p class="text-center text-sm text-slate-500 mt-4">
                    大問1（小問集合）だけで<span class="font-bold text-indigo-600">約48点</span>。<br>ここを落とすことは不合格を意味します。
                </p>
            </div>

            <!-- Chart 2: Skill Radar -->
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                    <i class="fa-solid fa-crosshairs text-indigo-500"></i> 要求スキル分析
                </h3>
                <div class="chart-container">
                    <canvas id="skillChart"></canvas>
                </div>
                <div class="mt-4 grid grid-cols-2 gap-2 text-xs text-center">
                    <div class="bg-indigo-50 p-2 rounded text-indigo-700 font-bold">計算・処理力重視</div>
                    <div class="bg-amber-50 p-2 rounded text-amber-700 font-bold">記述・表現力重視</div>
                </div>
            </div>
        </section>

        <!-- Deep Dive Section -->
        <section id="deep-dive" class="space-y-6">
            <div class="flex items-center justify-between">
                <h3 class="text-2xl font-bold text-slate-800">大問別・深掘り分析</h3>
                <span class="text-xs bg-slate-100 px-2 py-1 rounded text-slate-500">R2-R6 Trend</span>
            </div>

            <!-- Interactive Tab System -->
            <div class="flex flex-wrap gap-2 mb-4" id="qTabs">
                <!-- JS will populate buttons -->
            </div>

            <!-- Dynamic Content Pane -->
            <div id="qContent"
                class="bg-white rounded-3xl border border-slate-200 shadow-md p-6 md:p-10 min-h-[400px] transition-all">
                <!-- Content injected here -->
            </div>
        </section>

        <!-- Iron Rules Section -->
        <section id="rules" class="bg-slate-900 text-white rounded-[2.5rem] p-8 md:p-12 relative overflow-hidden">
            <div class="relative z-10 max-w-4xl mx-auto space-y-10">
                <div class="text-center">
                    <h3 class="text-3xl font-black mb-2">徳島数学・攻略の<span class="text-amber-400">鉄則</span>ロードマップ</h3>
                    <p class="text-slate-400">80点以上を取るための絶対条件</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Rule 1 -->
                    <div
                        class="bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20 hover:bg-white/20 transition cursor-default group">
                        <div
                            class="text-4xl font-black text-indigo-400 mb-4 group-hover:scale-110 transition-transform">
                            01</div>
                        <h4 class="text-xl font-bold mb-3">大問1<br>15分完答</h4>
                        <p class="text-sm text-slate-300 leading-relaxed">
                            12問を完璧にするには、中1の「空間図形（球・円錐）」と「作図」の総復習が必須。これが志望校決定の最低ライン。
                        </p>
                    </div>

                    <!-- Rule 2 -->
                    <div
                        class="bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20 hover:bg-white/20 transition cursor-default group">
                        <div
                            class="text-4xl font-black text-indigo-400 mb-4 group-hover:scale-110 transition-transform">
                            02</div>
                        <h4 class="text-xl font-bold mb-3">方程式は<br>「昨年」基準</h4>
                        <p class="text-sm text-slate-300 leading-relaxed">
                            割合の増減問題が出たら、迷わず「昨年」を $x, y$ と置く。徳島県はこのパターンが5年で3回以上的中している。
                        </p>
                    </div>

                    <!-- Rule 3 -->
                    <div
                        class="bg-white/10 backdrop-blur-sm p-6 rounded-2xl border border-white/20 hover:bg-white/20 transition cursor-default group">
                        <div
                            class="text-4xl font-black text-indigo-400 mb-4 group-hover:scale-110 transition-transform">
                            03</div>
                        <h4 class="text-xl font-bold mb-3">交点 ＝<br>連立方程式</h4>
                        <p class="text-sm text-slate-300 leading-relaxed">
                            大問5の最後は必ず「2直線の交点」。分数の解が出ても動じない計算体力をつけること。グラフを式にする力が鍵。
                        </p>
                    </div>
                </div>
            </div>

            <!-- Abstract Decor -->
            <div class="absolute -top-24 -right-24 w-64 h-64 bg-indigo-600 rounded-full blur-3xl opacity-50"></div>
            <div class="absolute -bottom-24 -left-24 w-64 h-64 bg-amber-500 rounded-full blur-3xl opacity-30"></div>
        </section>

        <!-- Forecast Section -->
        <section id="forecast" class="space-y-6">
            <h3 class="text-2xl font-bold text-slate-800 flex items-center gap-3">
                <i class="fa-solid fa-crosshairs text-indigo-600"></i> 頻出・重点ターゲット
            </h3>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="bg-white p-5 rounded-xl border-l-4 border-indigo-500 shadow-sm">
                    <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Target 1</span>
                    <h4 class="font-bold text-lg text-slate-800 mt-1">データ活用</h4>
                    <p class="text-sm text-slate-600 mt-2">箱ひげ図の読み取り。<br>新指導要領の最重要項目。</p>
                </div>
                <div class="bg-white p-5 rounded-xl border-l-4 border-indigo-500 shadow-sm">
                    <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Target 2</span>
                    <h4 class="font-bold text-lg text-slate-800 mt-1">文字式の説明</h4>
                    <p class="text-sm text-slate-600 mt-2">「2桁の自然数とその入れ替え」。記述の型を復習せよ。</p>
                </div>
                <div class="bg-white p-5 rounded-xl border-l-4 border-indigo-500 shadow-sm">
                    <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Target 3</span>
                    <h4 class="font-bold text-lg text-slate-800 mt-1">1次関数</h4>
                    <p class="text-sm text-slate-600 mt-2">料金プラン比較、または速さと道のりのダイヤグラム。</p>
                </div>
                <div class="bg-white p-5 rounded-xl border-l-4 border-indigo-500 shadow-sm">
                    <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Target 4</span>
                    <h4 class="font-bold text-lg text-slate-800 mt-1">作図</h4>
                    <p class="text-sm text-slate-600 mt-2">円の接線、または回転移動の中心特定。</p>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 py-10">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-slate-500 text-sm font-medium">ECC藍住のK</p>
            <p class="text-xs text-slate-400 mt-2">Data Source: 令和2年度〜令和6年度 徳島県中学校基礎学力テスト（2年数学）</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data: Question Analysis ---
        const questionData = {
            q1: {
                title: "大問1：小問集合",
                points: "約48点",
                theme: "基礎網羅・中1の罠",
                summary: "5年間一貫して、ここで約半分の配点が決まる。単なる計算だけでなく、中1範囲が2〜3割混ざるのが最大の特徴。",
                details: [
                    { label: "頻出の罠", text: "球の表面積・体積、おうぎ形の中心角、作図。現役中2生が最も忘れやすい単元。", icon: "fa-triangle-exclamation" },
                    { label: "必須スキル", text: "統計（データ活用）の用語理解。メジアン、モード、レンジは毎年出る。", icon: "fa-chart-bar" }
                ],
                chartType: "pie"
            },
            q2: {
                title: "大問2：文字式の説明 / 規則性",
                points: "約10点",
                theme: "記述力・論理の型",
                summary: "記述力が試されるセクション。R2は統計の記述だったが、R3以降は「文字式による説明」や「規則性」に固定化。",
                details: [
                    { label: "頻出テーマ", text: "整数の性質（カレンダー、連続する3整数）。マッチ棒などの規則性。", icon: "fa-list-ol" },
                    { label: "攻略法", text: "「nを整数とする」という導入から結論までの『記述テンプレート』を暗記すること。", icon: "fa-pen-nib" }
                ],
                chartType: "none"
            },
            q3: {
                title: "大問3：方程式の応用",
                points: "約12点",
                theme: "数学的モデリング・社会課題",
                summary: "徳島県は実社会の課題を方程式にする問題を好む。CO2削減、SDGs、修学旅行など。",
                details: [
                    { label: "鉄板パターン", text: "「昨年」を x, y と置いて、今年の増減（+10%, -20%等）を式にする。", icon: "fa-scale-balanced" },
                    { label: "注意点", text: "解いた x, y は昨年の値。問われているのが「今年」なら増減を加えるのを忘れない。", icon: "fa-circle-exclamation" }
                ],
                chartType: "none"
            },
            q4: {
                title: "大問4：図形の証明",
                points: "約15点",
                theme: "論理の整合性",
                summary: "平行四辺形や二等辺三角形を題材にした合同証明。論理の飛躍がない記述が求められる。",
                details: [
                    { label: "ターゲット", text: "平行四辺形の性質（対角線が中点で交わる）、平行線の錯角。", icon: "fa-shapes" },
                    { label: "テクニック", text: "折り返し図形における「角度の等しさ」を利用する問題が頻出。", icon: "fa-compass-drafting" }
                ],
                chartType: "none"
            },
            q5: {
                title: "大問5：1次関数の応用",
                points: "約15点",
                theme: "最難関・動点とグラフ",
                summary: "最上位層（城東・市立理数など）の選別問題。動点P、面積変化、水そうのグラフなど。",
                details: [
                    { label: "必須能力", text: "グラフの折れ曲がり点の意味を読み取る力。状況を式（y=ax+b）にする力。", icon: "fa-chart-line" },
                    { label: "最終関門", text: "2直線の交点を連立方程式で求める計算力。分数の解が出ることも多い。", icon: "fa-calculator" }
                ],
                chartType: "none"
            }
        };

        // --- Render Functions ---
        function renderButtons() {
            const container = document.getElementById('qTabs');
            const keys = Object.keys(questionData);

            container.innerHTML = keys.map((key, index) => `
                <button onclick="selectQuestion('${key}')" 
                    class="nav-btn px-6 py-3 rounded-full border border-slate-200 bg-white font-bold text-slate-600 transition-all shadow-sm hover:shadow-md ${index === 0 ? 'active' : ''}"
                    id="btn-${key}">
                    ${questionData[key].title}
                </button>
            `).join('');
        }

        function selectQuestion(key) {
            // Update Buttons
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${key}`).classList.add('active');

            // Update Content
            const data = questionData[key];
            const content = document.getElementById('qContent');

            // Fade effect
            content.classList.remove('animate-fade-in');
            void content.offsetWidth; // trigger reflow
            content.classList.add('animate-fade-in');

            content.innerHTML = `
                <div class="flex flex-col md:flex-row gap-8">
                    <div class="flex-1 space-y-6">
                        <div>
                            <div class="flex items-center gap-3 mb-2">
                                <span class="bg-indigo-100 text-indigo-700 px-3 py-1 rounded text-xs font-bold uppercase">Target</span>
                                <h4 class="text-3xl font-black text-slate-800">${data.title}</h4>
                            </div>
                            <p class="text-slate-500 font-bold text-lg">配点目安：<span class="text-amber-500">${data.points}</span></p>
                        </div>
                        
                        <p class="text-slate-600 leading-relaxed text-lg border-l-4 border-indigo-500 pl-4">
                            ${data.summary}
                        </p>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 pt-4">
                            ${data.details.map(d => `
                                <div class="bg-slate-50 p-4 rounded-xl border border-slate-100">
                                    <div class="flex items-center gap-2 mb-2 text-indigo-600">
                                        <i class="fa-solid ${d.icon}"></i>
                                        <span class="font-bold text-sm">${d.label}</span>
                                    </div>
                                    <p class="text-sm text-slate-700 font-medium">${d.text}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // --- Charts Initialization ---
        function initCharts() {
            // Score Chart (Doughnut)
            const scoreCtx = document.getElementById('scoreChart').getContext('2d');
            new Chart(scoreCtx, {
                type: 'doughnut',
                data: {
                    labels: ['大問1 (基礎・中1範囲)', '大問2 (記述)', '大問3 (応用)', '大問4 (証明)', '大問5 (関数)'],
                    datasets: [{
                        data: [48, 10, 12, 15, 15],
                        backgroundColor: [
                            '#4f46e5', // indigo-600
                            '#fbbf24', // amber-400
                            '#94a3b8', // slate-400
                            '#cbd5e1', // slate-300
                            '#e2e8f0'  // slate-200
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right' }
                    },
                    cutout: '60%'
                }
            });

            // Skill Chart (Radar)
            const skillCtx = document.getElementById('skillChart').getContext('2d');
            new Chart(skillCtx, {
                type: 'radar',
                data: {
                    labels: ['計算正確性', '記述・表現力', '数学的モデリング', '論理的推論', 'グラフ活用'],
                    datasets: [{
                        label: '要求スキル (5段階)',
                        data: [5, 4, 4, 4, 5],
                        backgroundColor: 'rgba(79, 70, 229, 0.2)',
                        borderColor: '#4f46e5',
                        pointBackgroundColor: '#4f46e5',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#4f46e5'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 5,
                            ticks: { display: false }
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }

        // --- Initialization ---
        window.onload = () => {
            initCharts();
            renderButtons();
            selectQuestion('q1'); // Default selection
        };

    </script>
    <!-- Placeholder Comments Required -->
    <!-- Visualization & Content Choices: 
         1. Score Distribution -> Doughnut Chart -> Chart.js -> Highlights the critical importance of Question 1 (approx. 50% of score).
         2. Skill Requirements -> Radar Chart -> Chart.js -> Visualizes the shift from calculation to modeling/logic.
         3. Question Deep Dive -> Interactive JS Grid -> Allows focused study on each "Step" of the test.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. Single file architecture.
    -->
</body>

</html>